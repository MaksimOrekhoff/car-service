# Car-service
## Репозиторий приложения для автовладельцев.
Сервис служит для хранения данных автовладельцев, их счетов и автомобилей. Этот проект является многомодульным приложением на REST-архитектуре с использованием ***Spring Boot 3.0.6***. К реализации выбран паттерн ***MVC***. Вкючает в себя два микросервиса ***cars*** и ***owners***, обменивающихся данными по HTTP, с собственными БД. В качестве СУБД выбрана ***PostgreSQL***. Для маппинга сущностей используется реализация спецификации JPA - библиотека ***Hibernate***. Unit и интеграционные в папках проекта ***test***. E2E написаны в Postman и находятся в файле ***Rikmasters test backend E2E.postman_collection***. Swagger спецификация в файлах ***openapi3_0cars*** и ***openapi3_0owners***. Диаграммы БД приложены в формате ***.png***.  

1. ***cars***    
    Сервис управляющий автомобилями и деталями
    
    1.1 ***Эндпойнты для управления данными***:
    + Автомобили
        - http://localhost:8080/cars/{carId}
        ***DELETE-запрос*** Удаление автомобиля
            - _carId_ - id удаляемого авто
        
        - http://localhost:8080/cars/changeCarOwner/{ownerId}/{carId}
        ***PUT*** изменение владельца автомобиля
            - _carId_ - id авто
            - _ownerId_ - id новый владелец авто
        
        - http://localhost:8080/cars           
        ***POST*** Добавление нового автомобиля.

        - http://localhost:8080/cars/{ownerId}/{carId}
        ***POST*** установить владельца автомобиля
            - _carId_ - id авто
            - _ownerId_ - id новый владелец авто

        - http://localhost:8080/cars/{carId}
        ***GET*** Получение автомобиля
             - _carId_ - id авто
        
        - http://localhost:8080/cars/removeCarOwner/{carId}
        ***DELETE*** Удалить старого владельца автомобиля
          - _carId_ - id авто 
        
        - http://localhost:8080/cars/{carId}
        ***PATCH-запрос*** Изменение автомобиля
            - _carId_ - id изменяемого авто

        http://localhost:8080/cars/search?&start={start}&end={end}&from={from}&size={size}           
        ***GET*** Возвращает полную информацию обо всех автомобилях подходящих под переданные параметры запроса.
            - _start_ - дата не раньше которой выпущен авто
            - _end_ - дата не позже которой выпущен авто
            - _from_ - количество авто, которые нужно пропустить для формирования текущего набора
            - _size_ - количество авто в наборе
   
        - http://localhost:8080/cars?&from={from}&size={size}            
        ***GET*** Возвращает полную информацию обо всех автомобилях.
            - _from_ - количество авто, которые нужно пропустить для формирования текущего набора
            - _size_ - количество авто в наборе
     
   + Детали
        - http://localhost:8080/details           
        ***PUT*** Добавление новой детали.
     
        - http://localhost:8080/details/{detailId}
        ***DELETE-запрос*** Удаление детали
          - _detailId_ - id удаляемой детали
          
        - http://localhost:8080/details/{detailId}
        ***GET-запрос*** Получение детали
          - _detailId_ - id получаемой детали

        - http://localhost:8080/details?&from={from}&size={size}            
        ***GET*** Возвращает полную информацию обо всех деталях.
          - _from_ - количество деталей, которые нужно пропустить для формирования текущего набора
          - _size_ - количество деталей в наборе 

        http://localhost:8080/details/search?&text={text}&from={from}&size={size}           
        ***GET*** Возвращает полную информацию обо всех автомобилях подходящих под переданные параметры запроса.
          - _text_ - название детали
          - _from_ - количество деталей, которые нужно пропустить для формирования текущего набора
          - _size_ - количество деталей в наборе 
           - с категорией не должно быть связано ни одного события.
        
2. ***stats-server***    
   Сервер управляющий водителями и счетами
   2.1 ***Эндпойнты для управления данными***:
   + Водители
        - http://localhost:9090/owners           
        ***POST*** Добавление нового автовладельца.
     
       - http://localhost:9090/owners/{ownerId}/{carId}
       ***POST*** установить владельца автомобиля
           - _carId_ - id авто
           - _ownerId_ - id новый владелец авто
         
       - http://localhost:9090/owners/deleteCar/{ownerId}
       ***DELETE*** установить владельца автомобиля
            - _ownerId_ - прошлый автовладелец
     
       - http://localhost:9090/owners/{ownerId}
        ***GET-запрос*** Получение автовладельца
            -_ownerId_ - id получаемого автовладельца
     
       - http://localhost:9090/owners/{ownerId}
        ***DELETE-запрос*** Удаление автовладельца
           - _ownerId_ - id удаляемого автовладельца

        - http://localhost:9090/owners/{ownerId}
        ***PATCH-запрос*** Изменение автовладельца
           - _ownerId_ - id изменяемого автовладельца

        - http://localhost:9090/owners/{ownerId}/{carId}
        ***PUT*** установить нового владельца автомобиля
           - _carId_ - id авто
           - _ownerId_ - id новый владелец авто

        - http://localhost:9090/owners?&from={from}&size={size}            
        ***GET*** Возвращает полную информацию обо всех автовладельцах.
         - _from_ - количество автовладельцев, которые нужно пропустить для формирования текущего набора
         - _size_ - количество автовладельцев в наборе
         
        - http://localhost:9090/owners/search?&text={text}&from={from}&size={size}           
        ***GET*** Возвращает полную информацию обо всех автовладельцах подходящих под переданные параметры запроса.
            - _text_ - текст для поиска по имени, фамилии или отчеству
            - _from_ - количество автовладельцев, которые нужно пропустить для формирования текущего набора
            - _size_ - количество автовладельцев в наборе
   + Аккаунты
        - http://localhost:9090/accounts/{ownerId}
        ***POST*** открыть новый счет
            - _ownerId_ - id владелец счета
            -
        - http://localhost:9090/accounts/{ownerId}
        ***GET-запрос*** Получение счета автовладельца
             -_ownerId_ - id владелец счета 

        - http://localhost:9090/accounts/{accountId}/{ownerId}")
        ***DELETE-запрос*** Удаление аккаунта 
             - _ownerId_ - id владелец счета
             - _accountId_ - id аккаунта
        
        - http://localhost:9090/accounts/withdrawalFacilities/{ownerId}?&text={text}&sum={sum}            
         ***PATCH*** Списание средств со счета.
              - _text_ - валюта списание
              - _sum_ - сумма списания
              - _ownerId_ - id  владелец счета

        - http://localhost:9090/accounts/withdrawalFacilities/{ownerId}?&text={text}&sum={sum}            
        ***PATCH*** Пополнение счета.
             - _text_ - валюта пополнения
            - _sum_ - сумма пополнения
            - _ownerId_ - id владелец счета